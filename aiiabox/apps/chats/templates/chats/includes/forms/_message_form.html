{% load i18n %}

{% comment %}
Message input form partial for chat detail view.

Parameters:
  - chat: Chat object (for form action URL)

Displays: Textarea for message input with submit button and character count
Note: This form will integrate with message creation endpoint in Phase 3 (LLM integration)
{% endcomment %}

<div class="border-t border-gray-200 dark:border-gray-800 p-4 bg-gray-50 dark:bg-gray-900">
  <form method="post"
        action="{% url 'chats:chat_detail' chat.pk %}"
        class="space-y-3"
        x-data="{ characterCount: 0, maxLength: 5000 }"
        @input="characterCount = $el.querySelector('textarea').value.length">
    {% csrf_token %}

    {# Message textarea #}
    <div>
      <textarea name="content" class="w-full px-4 py-3 border border-gray-300 rounded-lg resize-none dark:bg-gray-800 dark:border-gray-600 dark:text-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200" rows="3" placeholder="{% trans 'Type your message...' %}" maxlength="5000" required>
      </textarea>
    </div>

    {# Character count and submit #}
    <div class="flex items-center justify-between">
      <div class="text-xs text-gray-500 dark:text-gray-400">
        <span x-text="characterCount"></span>
        <span>/ 5000</span>
      </div>
      <button type="submit"
              class="px-6 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 dark:hover:bg-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900 transition-colors duration-200">
        {% trans "Send" %}
      </button>
    </div>
  </form>
</div>
